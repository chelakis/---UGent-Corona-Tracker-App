{"remainingRequest":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chelakis/infsec/infsecfinal/vue-infsec-proj/src/components/Login.vue?vue&type=style&index=0&id=ef68022e&scoped=true&lang=css&","dependencies":[{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/src/components/Login.vue","mtime":1591037233385},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpidXR0b24gewogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHBhZGRpbmc6IDE1cHggNzBweDsKICAgIC8qIGJvcmRlcjogMXB4IHNvbGlkICMwMjc1ZDg7ICovCiAgICAvKiBjb2xvcjogIzAyNzVkODsgKi8KICAgIC8qIGJhY2tncm91bmQtY29sb3I6I2ZmZjsgKi8KICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgICBmb250LXNpemU6IDI1cHg7CiAgICBmb250LWZhbWlseTogJ+W+rui9r+mbhem7kScsJ2FyaWFsJzsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKLyogZGl2IHsgKi8KLyogYWxpZ24taXRlbXM6IGNlbnRlcjsgKi8KLyogdGV4dC1hbGlnbjogY2VudGVyOyAqLwovKiB9ICovCgpwIHsKLyogdGV4dC1hbGlnbjpjZW50ZXI7ICovCiAgICBjb2xvcjogZ3JheTsKICAgIGZvbnQtc2l6ZTogMjBweDsKfQoKLmhvbGRlciB7CiAgICBwYWRkaW5nOiAyMHB4IDA7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBiYWNrZ3JvdW5kOiAjZmZmOwp9CgoKCgo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"main-div\">\n    <p>\n        Protect yourself and the others around you using CoronaTracker app.\n        Join the CoronaTracker app just by clicking on the button below.\n    </p> \n    <div class=\"holder\">\n        <button class=\"btn btn-primary\" type=\"submit\" v-on:click=\"login()\">Login</button>\n    </div>\n  </div>\n</template>\n\n<script>\n\n// import router from \".router/router.js\"\n\n// export default {\n//     // methods: {\n//     //     redirect: function () {import Vue from 'vue'\n\n//     //         this.router.push({ name: 'App' });   \n//     //     }\n//     // }\n//     methods: { login () {\n//         // this.$router.replace({ name: 'Texts' });\n//                     alert(\"hey\");\n//     }\n// }\n\nimport axios from '@/axios'\n// import { saveAs } from 'file-saver';\n\n\n\n\nexport default {\n    methods: {\n        login: function () {\n            const self = this\n            axios\n            .post('/external/authorize')\n            .then(response => (\n                self.$session.set('auth', response.data.token),\n                axios.\n                post('/users/' + response.data.uuid + '/register', {\n                \n                    token: response.data.token\n                })\n                .then(function (res) {\n                    self.$session.start()\n                    self.$session.set('jwt', res.data.token)\n                    self.$parent.authenticated = true\n                    console.log(self.$session.get('jwt'))\n                    console.log(response.data.uuid)\n\n                    var FileSaver = require('file-saver');\n                    var blob = new Blob([response.data.uuid, \",\", self.$session.get('auth'), \",\", self.$session.get('jwt')], {type: \"text/plain;charset=utf-8\"});\n                    FileSaver.saveAs(blob, \"user\" + response.data.uuid + \".txt\");\n\n                    self.$router.push({ name: 'texts' })                     \n                    // Vue.http.headers.common['Authorization'] = 'Bearer ' + res.data.token\n                    // axios.defaults.headers.common['Authorization'] = 'Bearer ' +  res.data.token\n                    // .then(ress => (console.log(ress.data.message)))\n                })\n            ))\n            \n                      \n        }\n    }\n}\n</script>\n\n<style scoped>\n\n    button {\n        align-items: center;\n        padding: 15px 70px;\n        /* border: 1px solid #0275d8; */\n        /* color: #0275d8; */\n        /* background-color:#fff; */\n        border-radius: 20px;\n        font-size: 25px;\n        font-family: '微软雅黑','arial';\n        cursor: pointer;\n    }\n\n    /* div { */\n    /* align-items: center; */\n    /* text-align: center; */\n    /* } */\n\n    p {\n    /* text-align:center; */\n        color: gray;\n        font-size: 20px;\n    }\n\n    .holder {\n        padding: 20px 0;\n        text-align: center;\n        background: #fff;\n    }\n\n\n\n  \n</style>"]}]}