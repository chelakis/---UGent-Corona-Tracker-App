{"remainingRequest":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/chelakis/infsec/infsecfinal/vue-infsec-proj/src/components/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/src/components/Login.vue","mtime":1591037233385},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/chelakis/infsec/infsecfinal/vue-infsec-proj/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgovLyBpbXBvcnQgcm91dGVyIGZyb20gIi5yb3V0ZXIvcm91dGVyLmpzIgoKLy8gZXhwb3J0IGRlZmF1bHQgewovLyAgICAgLy8gbWV0aG9kczogewovLyAgICAgLy8gICAgIHJlZGlyZWN0OiBmdW5jdGlvbiAoKSB7aW1wb3J0IFZ1ZSBmcm9tICd2dWUnCgovLyAgICAgLy8gICAgICAgICB0aGlzLnJvdXRlci5wdXNoKHsgbmFtZTogJ0FwcCcgfSk7ICAgCi8vICAgICAvLyAgICAgfQovLyAgICAgLy8gfQovLyAgICAgbWV0aG9kczogeyBsb2dpbiAoKSB7Ci8vICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBuYW1lOiAnVGV4dHMnIH0pOwovLyAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJoZXkiKTsKLy8gICAgIH0KLy8gfQoKaW1wb3J0IGF4aW9zIGZyb20gJ0AvYXhpb3MnCi8vIGltcG9ydCB7IHNhdmVBcyB9IGZyb20gJ2ZpbGUtc2F2ZXInOwoKCgoKZXhwb3J0IGRlZmF1bHQgewogICAgbWV0aG9kczogewogICAgICAgIGxvZ2luOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzCiAgICAgICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5wb3N0KCcvZXh0ZXJuYWwvYXV0aG9yaXplJykKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gKAogICAgICAgICAgICAgICAgc2VsZi4kc2Vzc2lvbi5zZXQoJ2F1dGgnLCByZXNwb25zZS5kYXRhLnRva2VuKSwKICAgICAgICAgICAgICAgIGF4aW9zLgogICAgICAgICAgICAgICAgcG9zdCgnL3VzZXJzLycgKyByZXNwb25zZS5kYXRhLnV1aWQgKyAnL3JlZ2lzdGVyJywgewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdG9rZW46IHJlc3BvbnNlLmRhdGEudG9rZW4KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2Vzc2lvbi5zdGFydCgpCiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2Vzc2lvbi5zZXQoJ2p3dCcsIHJlcy5kYXRhLnRva2VuKQogICAgICAgICAgICAgICAgICAgIHNlbGYuJHBhcmVudC5hdXRoZW50aWNhdGVkID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYuJHNlc3Npb24uZ2V0KCdqd3QnKSkKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnV1aWQpCgogICAgICAgICAgICAgICAgICAgIHZhciBGaWxlU2F2ZXIgPSByZXF1aXJlKCdmaWxlLXNhdmVyJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzcG9uc2UuZGF0YS51dWlkLCAiLCIsIHNlbGYuJHNlc3Npb24uZ2V0KCdhdXRoJyksICIsIiwgc2VsZi4kc2Vzc2lvbi5nZXQoJ2p3dCcpXSwge3R5cGU6ICJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgifSk7CiAgICAgICAgICAgICAgICAgICAgRmlsZVNhdmVyLnNhdmVBcyhibG9iLCAidXNlciIgKyByZXNwb25zZS5kYXRhLnV1aWQgKyAiLnR4dCIpOwoKICAgICAgICAgICAgICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICd0ZXh0cycgfSkgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBWdWUuaHR0cC5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgcmVzLmRhdGEudG9rZW4KICAgICAgICAgICAgICAgICAgICAvLyBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgIHJlcy5kYXRhLnRva2VuCiAgICAgICAgICAgICAgICAgICAgLy8gLnRoZW4ocmVzcyA9PiAoY29uc29sZS5sb2cocmVzcy5kYXRhLm1lc3NhZ2UpKSkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICkpCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"main-div\">\n    <p>\n        Protect yourself and the others around you using CoronaTracker app.\n        Join the CoronaTracker app just by clicking on the button below.\n    </p> \n    <div class=\"holder\">\n        <button class=\"btn btn-primary\" type=\"submit\" v-on:click=\"login()\">Login</button>\n    </div>\n  </div>\n</template>\n\n<script>\n\n// import router from \".router/router.js\"\n\n// export default {\n//     // methods: {\n//     //     redirect: function () {import Vue from 'vue'\n\n//     //         this.router.push({ name: 'App' });   \n//     //     }\n//     // }\n//     methods: { login () {\n//         // this.$router.replace({ name: 'Texts' });\n//                     alert(\"hey\");\n//     }\n// }\n\nimport axios from '@/axios'\n// import { saveAs } from 'file-saver';\n\n\n\n\nexport default {\n    methods: {\n        login: function () {\n            const self = this\n            axios\n            .post('/external/authorize')\n            .then(response => (\n                self.$session.set('auth', response.data.token),\n                axios.\n                post('/users/' + response.data.uuid + '/register', {\n                \n                    token: response.data.token\n                })\n                .then(function (res) {\n                    self.$session.start()\n                    self.$session.set('jwt', res.data.token)\n                    self.$parent.authenticated = true\n                    console.log(self.$session.get('jwt'))\n                    console.log(response.data.uuid)\n\n                    var FileSaver = require('file-saver');\n                    var blob = new Blob([response.data.uuid, \",\", self.$session.get('auth'), \",\", self.$session.get('jwt')], {type: \"text/plain;charset=utf-8\"});\n                    FileSaver.saveAs(blob, \"user\" + response.data.uuid + \".txt\");\n\n                    self.$router.push({ name: 'texts' })                     \n                    // Vue.http.headers.common['Authorization'] = 'Bearer ' + res.data.token\n                    // axios.defaults.headers.common['Authorization'] = 'Bearer ' +  res.data.token\n                    // .then(ress => (console.log(ress.data.message)))\n                })\n            ))\n            \n                      \n        }\n    }\n}\n</script>\n\n<style scoped>\n\n    button {\n        align-items: center;\n        padding: 15px 70px;\n        /* border: 1px solid #0275d8; */\n        /* color: #0275d8; */\n        /* background-color:#fff; */\n        border-radius: 20px;\n        font-size: 25px;\n        font-family: '微软雅黑','arial';\n        cursor: pointer;\n    }\n\n    /* div { */\n    /* align-items: center; */\n    /* text-align: center; */\n    /* } */\n\n    p {\n    /* text-align:center; */\n        color: gray;\n        font-size: 20px;\n    }\n\n    .holder {\n        padding: 20px 0;\n        text-align: center;\n        background: #fff;\n    }\n\n\n\n  \n</style>"]}]}